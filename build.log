#0 building with "default" instance using docker driver

#1 [document-service internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [document-service internal] load build definition from Dockerfile
#2 transferring dockerfile: 335B done
#2 DONE 0.0s

#3 [calculator-service internal] load build definition from Dockerfile
#3 transferring dockerfile: 545B 0.0s done
#3 DONE 0.0s

#4 [calculator-service internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [calculator-service internal] load metadata for docker.io/library/python:3.9-slim
#5 DONE 0.9s

#6 [document-service 1/6] FROM docker.io/library/python:3.9-slim@sha256:6250eb7983c08b3cf5a7db9309f8630d3ca03dd152158fa37a3f8daaf397085d
#6 DONE 0.0s

#7 [calculator-service internal] load build context
#7 transferring context: 204B done
#7 DONE 0.0s

#8 [calculator-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#8 CACHED

#9 [calculator-service 4/6] COPY requirements.txt .
#9 CACHED

#10 [calculator-service 3/6] RUN apt-get update &&     apt-get install -y --no-install-recommends     curl     && rm -rf /var/lib/apt/lists/*
#10 CACHED

#11 [calculator-service 6/6] COPY . .
#11 CACHED

#12 [document-service internal] load build context
#12 transferring context: 231B done
#12 DONE 0.0s

#13 [calculator-service 2/6] WORKDIR /app
#13 CACHED

#14 [calculator-service] exporting to image
#14 exporting layers done
#14 writing image sha256:835a06ea2b498d0a7d57944cf9e5ef3e676ec33d7e2abd04afb2f45f7438078f done
#14 naming to docker.io/library/inksight-calculator-service done
#14 DONE 0.0s

#15 [document-service 3/6] RUN apt-get update &&     apt-get install -y --no-install-recommends     curl     poppler-utils     && rm -rf /var/lib/apt/lists/*
#15 CACHED

#16 [document-service 4/6] COPY requirements.txt .
#16 DONE 0.1s

#17 [document-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#17 ...

#18 [frontend-service internal] load .dockerignore
#18 transferring context: 2B done
#18 DONE 0.0s

#19 [frontend-service internal] load build definition from Dockerfile
#19 transferring dockerfile: 334B done
#19 DONE 0.0s

#20 [frontend-service internal] load metadata for docker.io/library/python:3.8-slim
#20 DONE 0.3s

#17 [document-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#17 ...

#21 [frontend-service 1/7] FROM docker.io/library/python:3.8-slim@sha256:1d52838af602b4b5a831beb13a0e4d073280665ea7be7f69ce2382f29c5a613f
#21 DONE 0.0s

#22 [frontend-service internal] load build context
#22 transferring context: 486B 0.0s done
#22 DONE 0.0s

#23 [frontend-service 5/7] RUN pip install --no-cache-dir -r requirements.txt
#23 CACHED

#24 [frontend-service 2/7] WORKDIR /app
#24 CACHED

#25 [frontend-service 3/7] RUN apt-get update && apt-get install -y curl
#25 CACHED

#26 [frontend-service 4/7] COPY requirements.txt .
#26 CACHED

#27 [frontend-service 6/7] COPY . .
#27 CACHED

#28 [frontend-service 7/7] RUN mkdir -p static/css static/js templates
#28 CACHED

#29 [frontend-service] exporting to image
#29 exporting layers done
#29 writing image sha256:087cf5c04cc0fdb6ac0017a4f45a614a770008f2e43161d53a277c96745989cb 0.0s done
#29 naming to docker.io/library/inksight-frontend-service done
#29 DONE 0.0s

#17 [document-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#17 ...

#30 [api-gateway internal] load .dockerignore
#30 transferring context: 2B done
#30 DONE 0.0s

#31 [api-gateway internal] load build definition from Dockerfile
#31 transferring dockerfile: 545B done
#31 DONE 0.0s

#5 [api-gateway internal] load metadata for docker.io/library/python:3.9-slim
#5 DONE 1.8s

#17 [document-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#17 ...

#6 [api-gateway 1/6] FROM docker.io/library/python:3.9-slim@sha256:6250eb7983c08b3cf5a7db9309f8630d3ca03dd152158fa37a3f8daaf397085d
#6 DONE 0.0s

#32 [api-gateway internal] load build context
#32 transferring context: 93B done
#32 DONE 0.0s

#13 [api-gateway 2/6] WORKDIR /app
#13 CACHED

#10 [api-gateway 3/6] RUN apt-get update &&     apt-get install -y --no-install-recommends     curl     && rm -rf /var/lib/apt/lists/*
#10 CACHED

#33 [api-gateway 5/6] RUN pip install --no-cache-dir -r requirements.txt
#33 CACHED

#34 [api-gateway 4/6] COPY requirements.txt .
#34 CACHED

#35 [api-gateway 6/6] COPY . .
#35 CACHED

#36 [api-gateway] exporting to image
#36 exporting layers done
#36 writing image sha256:6f3f95a508ffae3e87dc984d0b659d5052a284819b712b5dc6fafc2933ca1534 0.0s done
#36 naming to docker.io/library/inksight-api-gateway done
#36 DONE 0.0s

#17 [document-service 5/6] RUN pip install --no-cache-dir -r requirements.txt
#17 2.233 Collecting Flask==2.0.1
#17 2.313   Downloading Flask-2.0.1-py3-none-any.whl (94 kB)
#17 2.330      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.8/94.8 kB 6.6 MB/s eta 0:00:00
#17 2.385 Collecting Werkzeug==2.0.1
#17 2.400   Downloading Werkzeug-2.0.1-py3-none-any.whl (288 kB)
#17 2.430      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 288.2/288.2 kB 10.3 MB/s eta 0:00:00
#17 2.677 Collecting anthropic==0.9.0
#17 2.694   Downloading anthropic-0.9.0-py3-none-any.whl (826 kB)
#17 3.005      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 826.9/826.9 kB 2.7 MB/s eta 0:00:00
#17 3.237 Collecting pdf2image==1.16.0
#17 3.255   Downloading pdf2image-1.16.0-py3-none-any.whl (10 kB)
#17 3.288 Collecting python-dotenv==0.19.0
#17 3.301   Downloading python_dotenv-0.19.0-py2.py3-none-any.whl (17 kB)
#17 3.760 Collecting Pillow==9.0.0
#17 3.869   Downloading Pillow-9.0.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.3 MB)
#17 4.708      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.3/4.3 MB 5.1 MB/s eta 0:00:00
#17 4.763 Collecting itsdangerous>=2.0
#17 4.777   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
#17 4.811 Collecting Jinja2>=3.0
#17 4.824   Downloading jinja2-3.1.4-py3-none-any.whl (133 kB)
#17 4.860      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.3/133.3 kB 4.7 MB/s eta 0:00:00
#17 4.899 Collecting click>=7.1.2
#17 4.913   Downloading click-8.1.7-py3-none-any.whl (97 kB)
#17 4.936      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 97.9/97.9 kB 4.6 MB/s eta 0:00:00
#17 5.153 Collecting pydantic<3,>=1.9.0
#17 5.169   Downloading pydantic-2.10.2-py3-none-any.whl (456 kB)
#17 5.264      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 456.4/456.4 kB 5.6 MB/s eta 0:00:00
#17 5.315 Collecting distro<2,>=1.7.0
#17 5.343   Downloading distro-1.9.0-py3-none-any.whl (20 kB)
#17 5.377 Collecting sniffio
#17 5.389   Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
#17 5.435 Collecting httpx<1,>=0.23.0
#17 5.447   Downloading httpx-0.28.0-py3-none-any.whl (73 kB)
#17 5.459      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 73.6/73.6 kB 6.5 MB/s eta 0:00:00
#17 5.514 Collecting typing-extensions<5,>=4.7
#17 5.530   Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)
#17 6.231 Collecting tokenizers>=0.13.0
#17 6.259   Downloading tokenizers-0.21.0-cp39-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
#17 6.849      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 5.1 MB/s eta 0:00:00
#17 6.900 Collecting anyio<5,>=3.5.0
#17 6.912   Downloading anyio-4.6.2.post1-py3-none-any.whl (90 kB)
#17 6.930      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 90.4/90.4 kB 6.1 MB/s eta 0:00:00
#17 6.984 Collecting idna>=2.8
#17 7.000   Downloading idna-3.10-py3-none-any.whl (70 kB)
#17 7.010      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 70.4/70.4 kB 7.2 MB/s eta 0:00:00
#17 7.046 Collecting exceptiongroup>=1.0.2
#17 7.061   Downloading exceptiongroup-1.2.2-py3-none-any.whl (16 kB)
#17 7.108 Collecting certifi
#17 7.123   Downloading certifi-2024.8.30-py3-none-any.whl (167 kB)
#17 7.152      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 167.3/167.3 kB 6.5 MB/s eta 0:00:00
#17 7.192 Collecting httpcore==1.*
#17 7.203   Downloading httpcore-1.0.7-py3-none-any.whl (78 kB)
#17 7.216      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.6/78.6 kB 6.9 MB/s eta 0:00:00
#17 7.258 Collecting h11<0.15,>=0.13
#17 7.269   Downloading h11-0.14.0-py3-none-any.whl (58 kB)
#17 7.281      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.3/58.3 kB 5.1 MB/s eta 0:00:00
#17 7.377 Collecting MarkupSafe>=2.0
#17 7.394   Downloading MarkupSafe-3.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
#17 8.457 Collecting pydantic-core==2.27.1
#17 8.483   Downloading pydantic_core-2.27.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
#17 8.868      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 5.6 MB/s eta 0:00:00
#17 8.903 Collecting annotated-types>=0.6.0
#17 8.914   Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
#17 8.996 Collecting huggingface-hub<1.0,>=0.16.4
#17 9.009   Downloading huggingface_hub-0.26.3-py3-none-any.whl (447 kB)
#17 9.084      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 447.6/447.6 kB 6.0 MB/s eta 0:00:00
#17 9.284 Collecting tqdm>=4.42.1
#17 9.301   Downloading tqdm-4.67.1-py3-none-any.whl (78 kB)
#17 9.315      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.5/78.5 kB 7.1 MB/s eta 0:00:00
#17 9.396 Collecting pyyaml>=5.1
#17 9.409   Downloading PyYAML-6.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (737 kB)
#17 9.557      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 737.4/737.4 kB 5.1 MB/s eta 0:00:00
#17 9.617 Collecting requests
#17 9.630   Downloading requests-2.32.3-py3-none-any.whl (64 kB)
#17 9.640      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 64.9/64.9 kB 7.8 MB/s eta 0:00:00
#17 9.693 Collecting fsspec>=2023.5.0
#17 9.713   Downloading fsspec-2024.10.0-py3-none-any.whl (179 kB)
#17 9.740      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 179.6/179.6 kB 6.9 MB/s eta 0:00:00
#17 9.779 Collecting filelock
#17 9.792   Downloading filelock-3.16.1-py3-none-any.whl (16 kB)
#17 9.831 Collecting packaging>=20.9
#17 9.847   Downloading packaging-24.2-py3-none-any.whl (65 kB)
#17 9.856      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.5/65.5 kB 12.4 MB/s eta 0:00:00
#17 10.09 Collecting charset-normalizer<4,>=2
#17 10.11   Downloading charset_normalizer-3.4.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (144 kB)
#17 10.13      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 144.9/144.9 kB 19.0 MB/s eta 0:00:00
#17 10.19 Collecting urllib3<3,>=1.21.1
#17 10.20   Downloading urllib3-2.2.3-py3-none-any.whl (126 kB)
#17 10.23      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 126.3/126.3 kB 6.3 MB/s eta 0:00:00
#17 10.47 Installing collected packages: Werkzeug, urllib3, typing-extensions, tqdm, sniffio, pyyaml, python-dotenv, Pillow, packaging, MarkupSafe, itsdangerous, idna, h11, fsspec, filelock, exceptiongroup, distro, click, charset-normalizer, certifi, annotated-types, requests, pydantic-core, pdf2image, Jinja2, httpcore, anyio, pydantic, huggingface-hub, httpx, Flask, tokenizers, anthropic
#17 12.73 Successfully installed Flask-2.0.1 Jinja2-3.1.4 MarkupSafe-3.0.2 Pillow-9.0.0 Werkzeug-2.0.1 annotated-types-0.7.0 anthropic-0.9.0 anyio-4.6.2.post1 certifi-2024.8.30 charset-normalizer-3.4.0 click-8.1.7 distro-1.9.0 exceptiongroup-1.2.2 filelock-3.16.1 fsspec-2024.10.0 h11-0.14.0 httpcore-1.0.7 httpx-0.28.0 huggingface-hub-0.26.3 idna-3.10 itsdangerous-2.2.0 packaging-24.2 pdf2image-1.16.0 pydantic-2.10.2 pydantic-core-2.27.1 python-dotenv-0.19.0 pyyaml-6.0.2 requests-2.32.3 sniffio-1.3.1 tokenizers-0.21.0 tqdm-4.67.1 typing-extensions-4.12.2 urllib3-2.2.3
#17 12.74 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#17 12.86 
#17 12.86 [notice] A new release of pip is available: 23.0.1 -> 24.3.1
#17 12.86 [notice] To update, run: pip install --upgrade pip
#17 DONE 13.3s

#37 [document-service 6/6] COPY . .
#37 DONE 0.1s

#38 [document-service] exporting to image
#38 exporting layers
#38 exporting layers 0.3s done
#38 writing image sha256:aedfdc217f97575a05f2e4c48f3efca27725a2cfdc7b35944c8ab50aed4f8f0e done
#38 naming to docker.io/library/inksight-document-service done
#38 DONE 0.3s
time="2024-12-01T06:59:03+05:30" level=warning msg="Found orphan containers ([inksight-auth-service-1]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
 Container inksight-document-service-1  Recreate
 Container inksight-calculator-service-1  Running
 Container inksight-frontend-service-1  Running
 Container inksight-api-gateway-1  Running
 Container inksight-document-service-1  Recreated
Attaching to api-gateway-1, calculator-service-1, document-service-1, frontend-service-1
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:03] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:03] "GET /health HTTP/1.1" 200 -
document-service-1    |  * Serving Flask app 'app' (lazy loading)
document-service-1    |  * Environment: production
document-service-1    |    WARNING: This is a development server. Do not use it in a production deployment.
document-service-1    |    Use a production WSGI server instead.
document-service-1    |  * Debug mode: off
document-service-1    |  * Running on all addresses.
document-service-1    |    WARNING: This is a development server. Do not use it in a production deployment.
document-service-1    |  * Running on http://172.25.0.2:5001/ (Press CTRL+C to quit)
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:05] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:05] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:05] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:13] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:13] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:15] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:15] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:15] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:23] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:23] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:25] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:25] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:25] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:33] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:34] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:35] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:35] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:36] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:44] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:44] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:46] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:46] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:46] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:29:54] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:29:54] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:29:56] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:29:56] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:29:56] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:30:04] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:30:04] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:30:06] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:30:06] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:30:06] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:30:14] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:30:14] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:30:16] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:30:16] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:30:16] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 127.0.0.1 - - [01/Dec/2024 01:30:24] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 127.0.0.1 - - [01/Dec/2024 01:30:24] "GET /health HTTP/1.1" 200 -
frontend-service-1    | 172.23.0.4 - - [01/Dec/2024 01:30:26] "GET /health HTTP/1.1" 200 -
calculator-service-1  | 172.23.0.4 - - [01/Dec/2024 01:30:26] "GET /health HTTP/1.1" 200 -
api-gateway-1         | 127.0.0.1 - - [01/Dec/2024 01:30:26] "GET /health HTTP/1.1" 200 -
